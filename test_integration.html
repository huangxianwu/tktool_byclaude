<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘ç­–ç•¥é›†æˆæµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: transform 0.2s;
        }
        .test-button:hover {
            transform: translateY(-2px);
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #f8f9fa;
            border-left: 4px solid #007bff;
        }
        .success {
            border-left-color: #28a745;
            background: #d4edda;
        }
        .error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¬ è§†é¢‘ç­–ç•¥é›†æˆæµ‹è¯•</h1>
        <p>æµ‹è¯•AIç¼–è¾‘å™¨ä¸è§†é¢‘ç­–ç•¥é¡µé¢çš„æ•°æ®ä¼ é€’å’Œé›†æˆåŠŸèƒ½</p>
        
        <div class="test-section">
            <h3>æµ‹è¯•æ­¥éª¤ï¼š</h3>
            <button class="test-button" onclick="testDataValidation()">1. æµ‹è¯•æ•°æ®éªŒè¯</button>
            <button class="test-button" onclick="testDataStorage()">2. æµ‹è¯•æ•°æ®å­˜å‚¨</button>
            <button class="test-button" onclick="testPageJump()">3. æµ‹è¯•é¡µé¢è·³è½¬</button>
            <button class="test-button" onclick="testFullIntegration()">4. å®Œæ•´é›†æˆæµ‹è¯•</button>
        </div>
        
        <div id="result" class="result" style="display: none;"></div>
    </div>

    <script>
        // æµ‹è¯•æ•°æ®
        const testData = {
            "phase1_analysis_and_strategy": {
                "targetAudience": {
                    "primaryAudience": "25-35å²éƒ½å¸‚å¥³æ€§",
                    "demographics": "ä¸­é«˜æ”¶å…¥ï¼Œæ³¨é‡æŠ¤è‚¤",
                    "painPoints": ["è‚Œè‚¤æš—æ²‰", "ç¼ºä¹å…‰æ³½", "æŠ¤è‚¤æ•ˆæœä¸æ˜æ˜¾"],
                    "desires": ["å¿«é€Ÿè§æ•ˆ", "å¤©ç„¶æˆåˆ†", "ç®€å•æ˜“ç”¨"]
                },
                "competitorAnalysis": {
                    "directCompetitors": ["å…°è”»", "é›…è¯—å…°é»›", "SK-II"],
                    "competitiveAdvantages": ["3åˆ†é’Ÿå¿«é€Ÿè§æ•ˆ", "å¤©ç„¶æ¤ç‰©ç²¾å", "æ€§ä»·æ¯”é«˜"],
                    "marketGap": "å¿«é€Ÿè§æ•ˆçš„å¤©ç„¶æŠ¤è‚¤äº§å“"
                },
                "contentStrategy": {
                    "coreMessage": "3åˆ†é’Ÿç„•å‘è‡ªç„¶å…‰å½©",
                    "emotionalTriggers": ["è‡ªä¿¡", "ç¾ä¸½", "å¹´è½»"],
                    "callToAction": "ç«‹å³ä½“éªŒï¼Œé‡è·å…‰å½©è‚Œè‚¤"
                },
                "sellingPoints": [
                    "å¤©ç„¶æ¤ç‰©ç²¾åï¼Œæ¸©å’Œä¸åˆºæ¿€",
                    "3åˆ†é’Ÿå¿«é€Ÿè§æ•ˆï¼Œç«‹ç«¿è§å½±",
                    "æ·±å±‚æ»‹å…»ï¼ŒæŒä¹…ä¿æ¹¿",
                    "ä¸“ä¸šé…æ–¹ï¼Œå®‰å…¨å¯é "
                ]
            },
            "phase2_creation_and_delivery": {
                "clipAnalysis": {
                    "recommendedClips": [
                        {
                            "clipType": "é—®é¢˜å±•ç¤º",
                            "duration": "3s",
                            "description": "å±•ç¤ºè‚Œè‚¤é—®é¢˜ï¼Œå¼•èµ·å…±é¸£",
                            "visualElements": ["ç‰¹å†™é•œå¤´", "å¯¹æ¯”æ•ˆæœ"]
                        },
                        {
                            "clipType": "äº§å“ä»‹ç»",
                            "duration": "4s", 
                            "description": "äº§å“ç‰¹å†™ï¼Œçªå‡ºå¤©ç„¶æˆåˆ†",
                            "visualElements": ["äº§å“ç‰¹å†™", "æˆåˆ†å±•ç¤º"]
                        },
                        {
                            "clipType": "ä½¿ç”¨æ¼”ç¤º",
                            "duration": "5s",
                            "description": "ä½¿ç”¨è¿‡ç¨‹ï¼Œå¼ºè°ƒç®€å•æ˜“ç”¨",
                            "visualElements": ["æ‰‹éƒ¨åŠ¨ä½œ", "æ¶‚æŠ¹è¿‡ç¨‹"]
                        },
                        {
                            "clipType": "æ•ˆæœå±•ç¤º",
                            "duration": "3s",
                            "description": "æ•ˆæœå¯¹æ¯”ï¼Œçªå‡ºæ”¹å–„æ•ˆæœ",
                            "visualElements": ["å‰åå¯¹æ¯”", "å…‰æ³½æ•ˆæœ"]
                        }
                    ],
                    "totalDuration": "15s"
                },
                "videoProductionBlueprint": {
                    "scenes": [
                        {
                            "sequenceNumber": 1,
                            "timeRange": "0-3s",
                            "sceneDescription": "é—®é¢˜å¼•å…¥",
                            "cameraMovement": "ç‰¹å†™æ¨è¿›",
                            "lighting": "è‡ªç„¶å…‰",
                            "props": ["é•œå­", "æŠ¤è‚¤å“"],
                            "transitions": "æ·¡å…¥"
                        },
                        {
                            "sequenceNumber": 2,
                            "timeRange": "3-7s", 
                            "sceneDescription": "äº§å“å±•ç¤º",
                            "cameraMovement": "360åº¦æ—‹è½¬",
                            "lighting": "æŸ”å’Œè¡¥å…‰",
                            "props": ["äº§å“åŒ…è£…", "å¤©ç„¶å…ƒç´ "],
                            "transitions": "åˆ‡æ¢"
                        },
                        {
                            "sequenceNumber": 3,
                            "timeRange": "7-12s",
                            "sceneDescription": "ä½¿ç”¨æ¼”ç¤º",
                            "cameraMovement": "è·Ÿéšæ‹æ‘„",
                            "lighting": "æ¸©æš–è‰²è°ƒ",
                            "props": ["æŠ¤è‚¤å“", "åŒ–å¦†é•œ"],
                            "transitions": "æµç•…è¿‡æ¸¡"
                        },
                        {
                            "sequenceNumber": 4,
                            "timeRange": "12-15s",
                            "sceneDescription": "æ•ˆæœå±•ç¤ºä¸CTA",
                            "cameraMovement": "ç¨³å®šç‰¹å†™",
                            "lighting": "é«˜äº®çªå‡º",
                            "props": ["æ•ˆæœå¯¹æ¯”", "è´­ä¹°æŒ‰é’®"],
                            "transitions": "æ·¡å‡º"
                        }
                    ],
                    "totalDuration": "15s"
                },
                "voiceoverScript": {
                    "scriptSegments": [
                        {
                            "timeRange": "0-3s",
                            "text": "è¿˜åœ¨ä¸ºè‚Œè‚¤é—®é¢˜çƒ¦æ¼å—ï¼Ÿ",
                            "tone": "å…³åˆ‡è¯¢é—®",
                            "pace": "ä¸­ç­‰",
                            "emphasis": ["è‚Œè‚¤é—®é¢˜"]
                        },
                        {
                            "timeRange": "3-7s",
                            "text": "å…¨æ–°å¤©ç„¶æŠ¤è‚¤ç²¾åï¼Œ3åˆ†é’Ÿç„•å‘å…‰å½©",
                            "tone": "å……æ»¡å¸Œæœ›",
                            "pace": "ç¨å¿«",
                            "emphasis": ["å¤©ç„¶", "3åˆ†é’Ÿ", "å…‰å½©"]
                        },
                        {
                            "timeRange": "7-12s",
                            "text": "è½»è½»æ¶‚æŠ¹ï¼Œæ·±å±‚æ»‹å…»ï¼Œè‚Œè‚¤ç¬é—´æ°´æ¶¦é€äº®",
                            "tone": "æ¸©æŸ”è¯´æ˜",
                            "pace": "ä¸­ç­‰",
                            "emphasis": ["æ·±å±‚æ»‹å…»", "æ°´æ¶¦é€äº®"]
                        },
                        {
                            "timeRange": "12-15s",
                            "text": "ç«‹å³ä¸‹å•ï¼Œé‡è·è‡ªä¿¡ç¾è‚Œï¼",
                            "tone": "æ¿€åŠ±å·å¬",
                            "pace": "ç¨å¿«",
                            "emphasis": ["ç«‹å³ä¸‹å•", "è‡ªä¿¡ç¾è‚Œ"]
                        }
                    ],
                    "totalDuration": "15s"
                }
            },
            "metadata": {
                "projectName": "å¤©ç„¶æŠ¤è‚¤ç²¾åå¹¿å‘Š",
                "createdAt": new Date().toISOString(),
                "lastModified": new Date().toISOString(),
                "tags": ["æŠ¤è‚¤", "ç¾å¦†", "ç”µå•†", "çŸ­è§†é¢‘"],
                "version": "1.0"
            }
        };

        function showResult(message, type = 'result') {
            const resultDiv = document.getElementById('result');
            resultDiv.className = `result ${type}`;
            resultDiv.innerHTML = message;
            resultDiv.style.display = 'block';
        }

        function testDataValidation() {
            showResult('ğŸ” æ­£åœ¨æµ‹è¯•æ•°æ®éªŒè¯...', 'result');
            
            // æ¨¡æ‹Ÿ isVideoStrategyData å‡½æ•°
            const hasPhase1 = testData.phase1_analysis_and_strategy;
            const hasPhase2 = testData.phase2_creation_and_delivery && 
                             testData.phase2_creation_and_delivery.videoProductionBlueprint;
            
            if (hasPhase1 && hasPhase2) {
                showResult('âœ… æ•°æ®éªŒè¯é€šè¿‡ï¼æ•°æ®ç»“æ„ç¬¦åˆè§†é¢‘ç­–ç•¥è¦æ±‚ã€‚', 'success');
            } else {
                showResult('âŒ æ•°æ®éªŒè¯å¤±è´¥ï¼ç¼ºå°‘å¿…è¦çš„æ•°æ®ç»“æ„ã€‚', 'error');
            }
        }

        function testDataStorage() {
            showResult('ğŸ’¾ æ­£åœ¨æµ‹è¯•æ•°æ®å­˜å‚¨...', 'result');
            
            // æ¨¡æ‹Ÿå­˜å‚¨åˆ° localStorage
            try {
                const strategyId = 'test_strategy_' + Date.now();
                localStorage.setItem(`video_strategy_${strategyId}`, JSON.stringify(testData));
                
                // éªŒè¯å­˜å‚¨
                const stored = localStorage.getItem(`video_strategy_${strategyId}`);
                if (stored) {
                    showResult(`âœ… æ•°æ®å­˜å‚¨æˆåŠŸï¼ç­–ç•¥ID: ${strategyId}`, 'success');
                } else {
                    showResult('âŒ æ•°æ®å­˜å‚¨å¤±è´¥ï¼', 'error');
                }
            } catch (error) {
                showResult(`âŒ å­˜å‚¨è¿‡ç¨‹å‡ºé”™ï¼š${error.message}`, 'error');
            }
        }

        function testPageJump() {
            showResult('ğŸ”— æ­£åœ¨æµ‹è¯•é¡µé¢è·³è½¬...', 'result');
            
            try {
                const strategyId = 'test_strategy_' + Date.now();
                localStorage.setItem(`video_strategy_${strategyId}`, JSON.stringify(testData));
                
                // æ„å»ºè·³è½¬URL
                const targetUrl = `/video-strategy?id=${strategyId}`;
                
                showResult(`âœ… é¡µé¢è·³è½¬å‡†å¤‡å®Œæˆï¼<br>
                           ç›®æ ‡URL: <a href="${targetUrl}" target="_blank">${targetUrl}</a><br>
                           <button onclick="window.open('${targetUrl}', '_blank')" class="test-button">æ‰“å¼€è§†é¢‘ç­–ç•¥é¡µé¢</button>`, 'success');
            } catch (error) {
                showResult(`âŒ é¡µé¢è·³è½¬å‡†å¤‡å¤±è´¥ï¼š${error.message}`, 'error');
            }
        }

        function testFullIntegration() {
            showResult('ğŸš€ æ­£åœ¨è¿›è¡Œå®Œæ•´é›†æˆæµ‹è¯•...', 'result');
            
            setTimeout(() => {
                try {
                    // 1. æ•°æ®éªŒè¯
                    const hasPhase1 = testData.phase1_analysis_and_strategy;
                    const hasPhase2 = testData.phase2_creation_and_delivery && 
                                     testData.phase2_creation_and_delivery.videoProductionBlueprint;
                    
                    if (!hasPhase1 || !hasPhase2) {
                        throw new Error('æ•°æ®éªŒè¯å¤±è´¥');
                    }
                    
                    // 2. æ•°æ®å­˜å‚¨
                    const strategyId = 'integration_test_' + Date.now();
                    localStorage.setItem(`video_strategy_${strategyId}`, JSON.stringify(testData));
                    
                    // 3. éªŒè¯å­˜å‚¨
                    const stored = localStorage.getItem(`video_strategy_${strategyId}`);
                    if (!stored) {
                        throw new Error('æ•°æ®å­˜å‚¨éªŒè¯å¤±è´¥');
                    }
                    
                    // 4. é¡µé¢è·³è½¬
                    const targetUrl = `/video-strategy?id=${strategyId}`;
                    
                    showResult(`ğŸ‰ å®Œæ•´é›†æˆæµ‹è¯•æˆåŠŸï¼<br><br>
                               âœ… æ•°æ®éªŒè¯é€šè¿‡<br>
                               âœ… æ•°æ®å­˜å‚¨æˆåŠŸ<br>
                               âœ… é¡µé¢è·³è½¬å‡†å¤‡å®Œæˆ<br><br>
                               <button onclick="window.open('${targetUrl}', '_blank')" class="test-button">ğŸ¬ æ‰“å¼€è§†é¢‘ç­–ç•¥é¡µé¢</button>`, 'success');
                    
                } catch (error) {
                    showResult(`âŒ å®Œæ•´é›†æˆæµ‹è¯•å¤±è´¥ï¼š${error.message}`, 'error');
                }
            }, 1000);
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
        window.onload = function() {
            showResult('ğŸ‘‹ æ¬¢è¿ä½¿ç”¨è§†é¢‘ç­–ç•¥é›†æˆæµ‹è¯•å·¥å…·ï¼è¯·ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•ã€‚', 'result');
        };
    </script>
</body>
</html>